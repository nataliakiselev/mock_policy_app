[{"/Users/nataliakiselev/bymiles-coding-test/src/index.js":"1","/Users/nataliakiselev/bymiles-coding-test/src/App.js":"2","/Users/nataliakiselev/bymiles-coding-test/src/context/auth-context.js":"3","/Users/nataliakiselev/bymiles-coding-test/src/components/login-form.js":"4","/Users/nataliakiselev/bymiles-coding-test/src/components/page-frame.js":"5","/Users/nataliakiselev/bymiles-coding-test/src/authenticated-app.js":"6","/Users/nataliakiselev/bymiles-coding-test/src/pages/policy-details.js":"7","/Users/nataliakiselev/bymiles-coding-test/src/pages/not-found.js":"8","/Users/nataliakiselev/bymiles-coding-test/src/theme.js":"9","/Users/nataliakiselev/bymiles-coding-test/src/context/policy-context.js":"10","/Users/nataliakiselev/bymiles-coding-test/src/components/lib.js":"11","/Users/nataliakiselev/bymiles-coding-test/src/context/app-providers.js":"12","/Users/nataliakiselev/bymiles-coding-test/src/pages/login-page.js":"13","/Users/nataliakiselev/bymiles-coding-test/src/protected-route.js":"14"},{"size":630,"mtime":1611230033085,"results":"15","hashOfConfig":"16"},{"size":371,"mtime":1611230135669,"results":"17","hashOfConfig":"16"},{"size":818,"mtime":1611200395887,"results":"18","hashOfConfig":"16"},{"size":2802,"mtime":1611224201074,"results":"19","hashOfConfig":"16"},{"size":766,"mtime":1611222005529,"results":"20","hashOfConfig":"16"},{"size":1027,"mtime":1611230263093,"results":"21","hashOfConfig":"16"},{"size":2025,"mtime":1611203293176,"results":"22","hashOfConfig":"16"},{"size":270,"mtime":1611183516344,"results":"23","hashOfConfig":"16"},{"size":473,"mtime":1611165004836,"results":"24","hashOfConfig":"16"},{"size":2219,"mtime":1611227381426,"results":"25","hashOfConfig":"16"},{"size":721,"mtime":1611202553332,"results":"26","hashOfConfig":"16"},{"size":776,"mtime":1611227262352,"results":"27","hashOfConfig":"16"},{"size":1298,"mtime":1611228314154,"results":"28","hashOfConfig":"16"},{"size":496,"mtime":1611229491396,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"44m3lk",{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51","usedDeprecatedRules":"36"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/nataliakiselev/bymiles-coding-test/src/index.js",[],"/Users/nataliakiselev/bymiles-coding-test/src/App.js",[],"/Users/nataliakiselev/bymiles-coding-test/src/context/auth-context.js",[],["60","61"],"/Users/nataliakiselev/bymiles-coding-test/src/components/login-form.js",[],"/Users/nataliakiselev/bymiles-coding-test/src/components/page-frame.js",[],"/Users/nataliakiselev/bymiles-coding-test/src/authenticated-app.js",[],"/Users/nataliakiselev/bymiles-coding-test/src/pages/policy-details.js",[],"/Users/nataliakiselev/bymiles-coding-test/src/pages/not-found.js",[],"/Users/nataliakiselev/bymiles-coding-test/src/theme.js",[],"/Users/nataliakiselev/bymiles-coding-test/src/context/policy-context.js",["62"],"import React, {\n  createContext,\n  useState,\n  useContext,\n  useEffect,\n  useCallback,\n} from 'react';\nimport { useToasts } from 'react-toast-notifications';\nimport { AuthContext } from './auth-context';\n\nexport const PolicyContext = createContext({\n  fetchPolicy: () => {},\n  loaded: false,\n  loading: false,\n  error: null,\n  policyDetails: {},\n});\n\nexport const PolicyDetailsProvider = props => {\n  const [policyDetails, setPolicyDetails] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [loaded, setLoaded] = useState(false);\n  const [error, setError] = useState(null);\n  const { logout, token } = useContext(AuthContext);\n  const { addToast } = useToasts();\n\n  const POLICY_URL = 'https://api.bybits.co.uk/policys/details';\n\n  const headers = {\n    environment: 'mock',\n    'Content-type': 'application/json',\n    Authorization: `Bearer ${token}`,\n  };\n\n  const fetchPolicyDetails = useCallback(async () => {\n    if (loading || loaded || error) {\n      return;\n    } else {\n      setLoading(true);\n    }\n    try {\n      const response = await fetch(POLICY_URL, {\n        // method: \"post\",\n        headers,\n      });\n\n      console.log('response', response);\n      if (response.ok) {\n        const data = await response.json();\n        console.log('data', data);\n        setPolicyDetails(data);\n      } else {\n        if (response.status === 401) {\n          logout();\n        }\n        throw response;\n      }\n    } catch (err) {\n      console.log('error in policy call ', err);\n      setError(err.message || 'failed to fetch policy details');\n      addToast(\n        `${err.message || err.statusText || 'Failed to fetch policy details'}`,\n        {\n          appearance: 'error',\n        },\n      );\n    } finally {\n      setLoading(false);\n      setLoaded(true);\n      console.log('loaded set', loaded);\n    }\n  });\n\n  useEffect(() => {\n    console.log('inuseeffect');\n    //if (!loaded) {\n    fetchPolicyDetails();\n    //}\n  }, [policyDetails, fetchPolicyDetails, token]);\n\n  return (\n    <PolicyContext.Provider\n      value={{\n        policyDetails,\n        loading,\n        error,\n        fetchPolicyDetails,\n      }}\n    >\n      {props.children}\n    </PolicyContext.Provider>\n  );\n};\n","/Users/nataliakiselev/bymiles-coding-test/src/components/lib.js",[],"/Users/nataliakiselev/bymiles-coding-test/src/context/app-providers.js",[],"/Users/nataliakiselev/bymiles-coding-test/src/pages/login-page.js",[],"/Users/nataliakiselev/bymiles-coding-test/src/protected-route.js",[],{"ruleId":"63","replacedBy":"64"},{"ruleId":"65","replacedBy":"66"},{"ruleId":"67","severity":1,"message":"68","line":35,"column":30,"nodeType":"69","endLine":35,"endColumn":41},"no-native-reassign",["70"],"no-negated-in-lhs",["71"],"react-hooks/exhaustive-deps","React Hook useCallback does nothing when called with only one argument. Did you forget to pass an array of dependencies?","Identifier","no-global-assign","no-unsafe-negation"]